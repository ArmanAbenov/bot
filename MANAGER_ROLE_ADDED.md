# ‚úÖ –†–æ–ª—å "–ú–µ–Ω–µ–¥–∂–µ—Ä" –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ —Å–∏—Å—Ç–µ–º—É

## üìä –ò–¢–û–ì–û–í–ê–Ø –°–¢–ê–¢–ò–°–¢–ò–ö–ê –ò–ù–î–ï–ö–°–û–í:

```
‚úÖ delivery/courier: 4 chunks (3 common + 1 courier)
‚úÖ delivery/franchise: 3 chunks (—Ç–æ–ª—å–∫–æ common)
‚úÖ sorting: 14 chunks (3 common + 11 sorting)
‚úÖ customer_service: 13 chunks (3 common + 10 customer_service)
‚úÖ manager: 4 chunks (3 common + 1 manager) üÜï
---
‚úÖ –í–°–ï–ì–û: 5 –æ—Ç–¥–µ–ª–æ–≤ —Å –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –∏–Ω–¥–µ–∫—Å–∞–º–∏
‚úÖ Fallback (admin): 3 chunks (common)
```

---

## üîß –ß–¢–û –ë–´–õ–û –°–î–ï–õ–ê–ù–û:

### 1. –û–±–Ω–æ–≤–ª–µ–Ω Enum Department (models.py)
```python
class Department(str, Enum):
    COURIER = "delivery/courier"
    FRANCHISE = "delivery/franchise"
    SORTING = "sorting"
    CUSTOMER_SERVICE = "customer_service"
    MANAGER = "manager"  # üÜï –î–û–ë–ê–í–õ–ï–ù–û
    
    @classmethod
    def get_display_names(cls):
        return {
            ...
            cls.MANAGER: "–ú–µ–Ω–µ–¥–∂–µ—Ä",  # üÜï
        }
    
    @classmethod
    def get_tree_structure(cls):
        return {
            ...
            "–ú–µ–Ω–µ–¥–∂–µ—Ä": cls.MANAGER,  # üÜï
        }
```

### 2. –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ –≤ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã (keyboards/department.py)

**–î–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:**
```python
buttons.append([
    InlineKeyboardButton(
        text="üëî –ú–µ–Ω–µ–¥–∂–µ—Ä",
        callback_data=f"dept_registration_manager"
    )
])
```

**–î–ª—è –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏:**
```python
buttons.append([
    InlineKeyboardButton(
        text="üëî –ú–µ–Ω–µ–¥–∂–µ—Ä",
        callback_data=f"dept_admin_knowledge_manager"
    )
])
```

### 3. –°–æ–∑–¥–∞–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
c:\projects\UQ-bot\data\knowledge\
‚îú‚îÄ‚îÄ common/                          # –í–∏–¥—è—Ç –í–°–ï
‚îÇ   ‚îú‚îÄ‚îÄ welcome.txt
‚îÇ   ‚îú‚îÄ‚îÄ syganak_wifi_password.txt
‚îÇ   ‚îî‚îÄ‚îÄ text_comprehension.txt
‚îú‚îÄ‚îÄ manager/                         # üÜï –¢–æ–ª—å–∫–æ –º–µ–Ω–µ–¥–∂–µ—Ä—ã
‚îÇ   ‚îî‚îÄ‚îÄ manager_guide.txt           # –ö–û–ù–§–ò–î–ï–ù–¶–ò–ê–õ–¨–ù–û!
‚îú‚îÄ‚îÄ delivery/courier/
‚îú‚îÄ‚îÄ sorting/
‚îî‚îÄ‚îÄ customer_service/
```

### 4. AI Service –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Ö–≤–∞—Ç–∏–ª –∏–∑–º–µ–Ω–µ–Ω–∏—è
- –ò–Ω–¥–µ–∫—Å `manager` —Å–æ–∑–¥–∞–µ—Ç—Å—è –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
- –°–æ–¥–µ—Ä–∂–∏—Ç: 3 common chunks + 1 manager chunk
- –ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω –æ—Ç –¥—Ä—É–≥–∏—Ö –æ—Ç–¥–µ–ª–æ–≤

---

## üîê –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï –ò–ó–û–õ–Ø–¶–ò–ò:

### –¢–µ—Å—Ç 1: –ú–µ–Ω–µ–¥–∂–µ—Ä –≤–∏–¥–∏—Ç —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: –ú–µ–Ω–µ–¥–∂–µ—Ä (department = "manager")
–í–æ–ø—Ä–æ—Å: "–ö–∞–∫–æ–π –∫–æ–¥ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ?"
‚úÖ –û—Ç–≤–µ—Ç: "MANAGER_2024" (–∏–∑ manager_guide.txt)
```

### –¢–µ—Å—Ç 2: –ö—É—Ä—å–µ—Ä –ù–ï –≤–∏–¥–∏—Ç –¥–∞–Ω–Ω—ã–µ –º–µ–Ω–µ–¥–∂–µ—Ä–∞
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: –ö—É—Ä—å–µ—Ä (department = "delivery/courier")
–í–æ–ø—Ä–æ—Å: "–ö–∞–∫–æ–π –∫–æ–¥ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ?"
‚ùå –û—Ç–≤–µ—Ç: "–í –±–∞–∑–µ –∑–Ω–∞–Ω–∏–π –Ω–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏"
‚úÖ –ò–ó–û–õ–Ø–¶–ò–Ø –†–ê–ë–û–¢–ê–ï–¢!
```

### –¢–µ—Å—Ç 3: –ú–µ–Ω–µ–¥–∂–µ—Ä –ù–ï –≤–∏–¥–∏—Ç –¥–∞–Ω–Ω—ã–µ –∫—É—Ä—å–µ—Ä–æ–≤
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: –ú–µ–Ω–µ–¥–∂–µ—Ä (department = "manager")
–í–æ–ø—Ä–æ—Å: "–ö–∞–∫–æ–π –∫–æ–¥ –æ—Ç —Å–∫–ª–∞–¥–∞?"
‚ùå –û—Ç–≤–µ—Ç: "–í –±–∞–∑–µ –∑–Ω–∞–Ω–∏–π –Ω–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏"
‚úÖ –ò–ó–û–õ–Ø–¶–ò–Ø –†–ê–ë–û–¢–ê–ï–¢!
```

### –¢–µ—Å—Ç 4: –ú–µ–Ω–µ–¥–∂–µ—Ä –≤–∏–¥–∏—Ç –æ–±—â–∏–µ –∑–Ω–∞–Ω–∏—è
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: –ú–µ–Ω–µ–¥–∂–µ—Ä (department = "manager")
–í–æ–ø—Ä–æ—Å: "–ö–∞–∫–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç—ã –ø–æ–¥–¥–µ—Ä–∂–∫–∏?"
‚úÖ –û—Ç–≤–µ—Ç: "support@uqsoft.com" (–∏–∑ common/welcome.txt)
```

---

## üìù –ü–†–û–¶–ï–°–° –†–ï–ì–ò–°–¢–†–ê–¶–ò–ò –ú–ï–ù–ï–î–ñ–ï–†–ê:

### –®–∞–≥ 1: –í—ã–±–æ—Ä –æ—Ç–¥–µ–ª–∞
```
User: [–≤–≤–æ–¥–∏—Ç –∏–Ω–≤–∞–π—Ç-–∫–æ–¥]
Bot: –í—ã–±–µ—Ä–∏ —Å–≤–æ–π –æ—Ç–¥–µ–ª:
     [üì¶ –î–æ—Å—Ç–∞–≤–∫–∞]
     [üìä –°–æ—Ä—Ç–∏—Ä–æ–≤–æ—á–Ω—ã–π —Ü–µ–Ω—Ç—Ä]
     [üí¨ –ö–ª–∏–µ–Ω—Ç—Å–∫–∏–π —Å–µ—Ä–≤–∏—Å]
     [üëî –ú–µ–Ω–µ–¥–∂–µ—Ä]  üÜï
```

### –®–∞–≥ 2: –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
```
User: [–Ω–∞–∂–∏–º–∞–µ—Ç "üëî –ú–µ–Ω–µ–¥–∂–µ—Ä"]
Bot: ‚úÖ –û—Ç–ª–∏—á–Ω–æ! –¢–≤–æ–π –æ—Ç–¥–µ–ª: –ú–µ–Ω–µ–¥–∂–µ—Ä
     –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ —Å–∏—Å—Ç–µ–º—É UQsoft!
```

---

## üóÑÔ∏è –û–ë–ù–û–í–õ–ï–ù–ò–ï –ë–î:

–ü—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –º–µ–Ω–µ–¥–∂–µ—Ä–∞:
```sql
UPDATE users 
SET department = 'manager' 
WHERE telegram_id = <user_id>;
```

–ü—Ä–æ–≤–µ—Ä–∫–∞:
```sql
SELECT telegram_id, full_name, department, role 
FROM users 
WHERE department = 'manager';
```

---

## üîç –õ–û–ì–ò–†–û–í–ê–ù–ò–ï:

–ü—Ä–∏ –ø–æ–∏—Å–∫–µ –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º:
```
[RAG] User 12345 department: manager
[RAG] Using department index: manager
[RAG] User 12345 (Dept: manager) searching for 3 most relevant chunks...
[RAG] Found 3 relevant chunks from 2 files: ['common/welcome.txt', 'manager/manager_guide.txt']
```

---

## üìÇ –°–û–î–ï–†–ñ–ò–ú–û–ï MANAGER_GUIDE.TXT:

```
# –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤ UQsoft

## –î–æ—Å—Ç—É–ø –∫ –∞–Ω–∞–ª–∏—Ç–∏–∫–µ:
- –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è: https://dashboard.uqsoft.com
- –ö–æ–¥ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ: MANAGER_2024

## –ö–ª—é—á–µ–≤—ã–µ –∑–∞–¥–∞—á–∏:
1. –ö–æ–Ω—Ç—Ä–æ–ª—å KPI –æ—Ç–¥–µ–ª–∞
2. –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á
3. –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–µ –æ—Ç—á–µ—Ç—ã
4. –†–∞–±–æ—Ç–∞ —Å VIP-–∫–ª–∏–µ–Ω—Ç–∞–º–∏

## –ü–æ–ª–Ω–æ–º–æ—á–∏—è:
- –£—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –æ—Ç–ø—É—Å–∫–æ–≤
- –î–æ—Å—Ç—É–ø –∫ –æ—Ç—á–µ—Ç–∞–º –≤—Å–µ—Ö –æ—Ç–¥–µ–ª–æ–≤
- –ü—Ä–µ–º–∏—Ä–æ–≤–∞–Ω–∏–µ (–ª–∏–º–∏—Ç 50 000 —Ä—É–±/–º–µ—Å—è—Ü)

–ö–û–ù–§–ò–î–ï–ù–¶–ò–ê–õ–¨–ù–û: –≠—Ç–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ —Ç–æ–ª—å–∫–æ –º–µ–Ω–µ–¥–∂–µ—Ä–∞–º!
```

---

## ‚úÖ –†–ï–ó–£–õ–¨–¢–ê–¢:

**–°–∏—Å—Ç–µ–º–∞ multitenancy —Ç–µ–ø–µ—Ä—å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç 5 –æ—Ç–¥–µ–ª–æ–≤:**
1. delivery/courier (–∫—É—Ä—å–µ—Ä—ã)
2. delivery/franchise (—Ñ—Ä–∞–Ω—á–∞–π–∑–∏)
3. sorting (—Å–æ—Ä—Ç–∏—Ä–æ–≤–æ—á–Ω—ã–π —Ü–µ–Ω—Ç—Ä)
4. customer_service (–∫–ª–∏–µ–Ω—Ç—Å–∫–∏–π —Å–µ—Ä–≤–∏—Å)
5. manager (–º–µ–Ω–µ–¥–∂–µ—Ä—ã) üÜï

**–ö–∞–∂–¥—ã–π –æ—Ç–¥–µ–ª –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω:**
- ‚úÖ –ú–µ–Ω–µ–¥–∂–µ—Ä—ã –≤–∏–¥—è—Ç —Ç–æ–ª—å–∫–æ: common + manager
- ‚úÖ –ö—É—Ä—å–µ—Ä—ã –≤–∏–¥—è—Ç —Ç–æ–ª—å–∫–æ: common + courier
- ‚úÖ –°–æ—Ä—Ç–∏—Ä–æ–≤—â–∏–∫–∏ –≤–∏–¥—è—Ç —Ç–æ–ª—å–∫–æ: common + sorting
- ‚úÖ –ö–ª–∏–µ–Ω—Ç—Å–∫–∏–π —Å–µ—Ä–≤–∏—Å –≤–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ: common + customer_service

**–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**
- üîí –ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞ –¥—Ä—É–≥–∏–º –æ—Ç–¥–µ–ª–∞–º
- üîí –ö–æ–¥ –¥–æ—Å—Ç—É–ø–∞ "MANAGER_2024" –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω –≤ –∏–Ω–¥–µ–∫—Å–µ manager
- üîí –ö—É—Ä—å–µ—Ä—ã –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤—â–∏–∫–∏ –ù–ï –≤–∏–¥—è—Ç —Ñ–∏–Ω–∞–Ω—Å–æ–≤—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
- üîí –û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è (common/) –¥–æ—Å—Ç—É–ø–Ω–∞ –≤—Å–µ–º

---

## üöÄ –ì–û–¢–û–í–û –ö –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ!

–†–æ–ª—å "–ú–µ–Ω–µ–¥–∂–µ—Ä" –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ –≤ —Å–∏—Å—Ç–µ–º—É multitenancy –∏ –≥–æ—Ç–æ–≤–∞ –∫ production.
