–≠—Ç–∞–ø 0. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∏ –±–∞–∑–∞ (–ó–∞–≤–µ—Ä—à–µ–Ω–æ)
[x] –í—ã–±–æ—Ä —Å—Ç–µ–∫–∞: Python 3.14, aiogram 3.x, SQLite, FAISS.

[x] –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Python, —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è SQLite Viewer, –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ .cursorrules.

[x] –°–æ–∑–¥–∞–Ω–∏–µ –ë–î: –†–µ—à–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª uqsoft.db –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏.

–≠—Ç–∞–ø 1. –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ ¬´–°–∫–µ–ª–µ—Ç¬ª (–ó–∞–≤–µ—Ä—à–µ–Ω–æ)
[x] –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞: –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø–∞–ø–æ–∫ (app/core, app/bot, app/services, app/utils, data).

[x] –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (dotenv): –ù–∞—Å—Ç—Ä–æ–π–∫–∞ .env –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è BOT_TOKEN –∏ OPENAI_API_KEY (—Å–æ–∑–¥–∞–Ω .env.example).

[x] –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (SQLAlchemy): –û–ø–∏—Å–∞—Ç—å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –¥–≤–∏–∂–æ–∫ –¥–ª—è sqlite+aiosqlite —Å WAL —Ä–µ–∂–∏–º–æ–º.

[x] –°–æ–∑–¥–∞—Ç—å –º–æ–¥–µ–ª–∏: User (id, tg_id, role, status), OnboardingProgress.

[x] –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞: –ë–∞–∑–æ–≤—ã–π —Ñ–∞–π–ª main.py, –∫–æ—Ç–æ—Ä—ã–π –∑–∞–ø—É—Å–∫–∞–µ—Ç –ª–æ–≥–≥–µ—Ä –∏ –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ /start.

–≠—Ç–∞–ø 2. –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏ —Ä–æ–ª–µ–π (–ó–∞–≤–µ—Ä—à–µ–Ω–æ)
[x] Middleware –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞: –°–æ–∑–¥–∞—Ç—å —Ñ–∏–ª—å—Ç—Ä, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (Employee/Manager/Admin) –ø–µ—Ä–µ–¥ –æ—Ç–≤–µ—Ç–æ–º.

[x] –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è: –•–µ–Ω–¥–ª–µ—Ä –¥–ª—è –≤–≤–æ–¥–∞ –∏–Ω–≤–∞–π—Ç-–∫–æ–¥–∞ –∏–ª–∏ –Ω–æ–º–µ—Ä–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –¥–ª—è –Ω–æ–≤—ã—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤.

[x] –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é: –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞, –∫–æ—Ç–æ—Ä–∞—è –º–µ–Ω—è–µ—Ç—Å—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–æ–ª–∏.

–≠—Ç–∞–ø 3. AI –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π (RAG –Ω–∞ Gemini) ‚Äî –ó–∞–≤–µ—Ä—à–µ–Ω–æ (–±–∞–∑–æ–≤–∞—è –≤–µ—Ä—Å–∏—è)
[x] –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤: –°–∫—Ä–∏–ø—Ç –Ω–∞ PyMuPDF (fitz) –≥–æ—Ç–æ–≤. –ë–æ—Ç –≤–∏–¥–∏—Ç PDF –∏ TXT –≤ data/knowledge.

[x] –ü–∞–π–ø–ª–∞–π–Ω ¬´–í–æ–ø—Ä–æ—Å-–û—Ç–≤–µ—Ç¬ª: –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –Ω–∞ gemini-2.5-flash —Å —Å–∏—Å—Ç–µ–º–Ω–æ–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–µ–π. FSM —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è –æ–∂–∏–¥–∞–Ω–∏—è –≤–æ–ø—Ä–æ—Å–∞.

[x] Status Tracking: –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ "–ü–µ—á–∞—Ç–∞–µ—Ç..." —á–µ—Ä–µ–∑ send_chat_action.

[x] –í–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫ (–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è): > –ü–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ: –°–µ–π—á–∞—Å –±–æ—Ç —á–∏—Ç–∞–µ—Ç –≤–µ—Å—å PDF —Ü–µ–ª–∏–∫–æ–º –ø—Ä–∏ –∫–∞–∂–¥–æ–º –≤–æ–ø—Ä–æ—Å–µ. –ï—Å–ª–∏ —Ñ–∞–π–ª–æ–≤ —Å—Ç–∞–Ω–µ—Ç 10, Gemini –º–æ–∂–µ—Ç –Ω–∞—á–∞—Ç—å ¬´—Ç—É–ø–∏—Ç—å¬ª –∏–ª–∏ –≤—ã–¥–∞–≤–∞—Ç—å –æ—à–∏–±–∫–∏ –ª–∏–º–∏—Ç–æ–≤.

–ó–∞–¥–∞—á–∞: –í–Ω–µ–¥—Ä–∏—Ç—å —Ä–∞–∑–±–∏–µ–Ω–∏–µ –Ω–∞ —á–∞–Ω–∫–∏ –∏ –ª–æ–∫–∞–ª—å–Ω—ã–π –∏–Ω–¥–µ–∫—Å (FAISS –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ–µ –≤–µ–∫—Ç–æ—Ä–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ), —á—Ç–æ–±—ã –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –≤ Gemini —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–µ –∫—É—Å–∫–∏ —Ç–µ–∫—Å—Ç–∞, –∞ –Ω–µ –≤—Å—ë —Å—Ä–∞–∑—É.

–§–∞–π–ª: app/services/vector_store.py (–±–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–æ–∑–¥–∞–Ω–∞)

[x] –ü–∞–º—è—Ç—å –¥–∏–∞–ª–æ–≥–∞: –ß—Ç–æ–±—ã –±–æ—Ç –ø–æ–º–Ω–∏–ª –∫–æ–Ω—Ç–µ–∫—Å—Ç –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö 3-5 —Å–æ–æ–±—â–µ–Ω–∏–π.

–§–∞–π–ª: app/services/dialog_memory.py (–±–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–æ–∑–¥–∞–Ω–∞)

üü¢ –≠—Ç–∞–ø 4. –ì–æ–ª–æ—Å –∏ –ú—É–ª—å—Ç–∏–º–µ–¥–∏–∞ ‚Äî –ó–∞–≤–µ—Ä—à–µ–Ω–æ
[x] Gemini Multimodal:–º—ã –º–æ–∂–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–æ–¥–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é Gemini 1.5. –û–Ω–∞ —É–º–µ–µ—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å –∞—É–¥–∏–æ –Ω–∞–ø—Ä—è–º—É—é!

–ó–∞–¥–∞—á–∞: –•–µ–Ω–¥–ª–µ—Ä –¥–ª—è –ø—Ä–∏–µ–º–∞ .ogg (–≥–æ–ª–æ—Å–æ–≤—ã—Ö –∏–∑ TG), –æ—Ç–ø—Ä–∞–≤–∫–∞ –∏—Ö –≤ Gemini –¥–ª—è —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏–∏ –∏ –æ—Ç–≤–µ—Ç–∞.

–§–∞–π–ª: app/bot/handlers/media.py (—Ö–µ–Ω–¥–ª–µ—Ä –¥–ª—è –≥–æ–ª–æ—Å–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π), app/services/ai_service.py (–º–µ—Ç–æ–¥ get_answer_from_audio)

[x] –ú–µ–¥–∏–∞-–æ—Ç–≤–µ—Ç—ã: –ï—Å–ª–∏ –≤ –±–∞–∑–µ –∑–Ω–∞–Ω–∏–π (PDF) –µ—Å—Ç—å —Å—Å—ã–ª–∫–∏ –Ω–∞ YouTube –∏–ª–∏ —Ñ–∞–π–ª—ã, –±–æ—Ç –¥–æ–ª–∂–µ–Ω —É–º–µ—Ç—å –∫—Ä–∞—Å–∏–≤–æ –∏—Ö –æ—Ñ–æ—Ä–º–ª—è—Ç—å.

–§–∞–π–ª: app/bot/handlers/media.py (—Ñ—É–Ω–∫—Ü–∏–∏ extract_media_links, format_response_with_media, create_media_keyboard)

üü† –≠—Ç–∞–ø 5. –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –æ–Ω–±–æ—Ä–¥–∏–Ω–≥ (30 –¥–Ω–µ–π) ‚Äî –ü–õ–ê–ù
[ ] –î–≤–∏–≥–∞—Ç–µ–ª—å —á–µ–∫-–ª–∏—Å—Ç–æ–≤: –°–æ–∑–¥–∞–µ–º —Ç–∞–±–ª–∏—Ü—É tasks –≤ SQLite.

[ ] –õ–æ–≥–∏–∫–∞ —Ä–∞—Å—Å—ã–ª–æ–∫: –°–∫—Ä–∏–ø—Ç (Scheduler), –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ–≤–µ—Ä—è–µ—Ç: ¬´–ü—Ä–æ—à–ª–æ –ª–∏ 7 –¥–Ω–µ–π —Å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —é–∑–µ—Ä–∞? –ï—Å–ª–∏ –¥–∞ ‚Äî –æ—Ç–ø—Ä–∞–≤—å –ö–≤–∏–∑ ‚Ññ2¬ª.

[ ] –ö–≤–∏–∑—ã (Polls): –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–æ–¥–Ω—ã—Ö –æ–ø—Ä–æ—Å–æ–≤ Telegram –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–Ω–∞–Ω–∏–π.

üî¥ –≠—Ç–∞–ø 6. –ü–∞–Ω–µ–ª—å –ú–µ–Ω–µ–¥–∂–µ—Ä–∞ –∏ –ê–Ω–∞–ª–∏—Ç–∏–∫–∞
[ ] –ê–¥–º–∏–Ω-–∫–æ–º–∞–Ω–¥—ã: /stats –¥–ª—è –≤—ã–≤–æ–¥–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∞–∫—Ç–∏–≤–Ω—ã—Ö —É—á–µ–Ω–∏–∫–æ–≤.

[ ] –ê–ª–µ—Ä—Ç—ã: –ë–æ—Ç –ø–∏—à–µ—Ç –∞–¥–º–∏–Ω—É (—Ç–µ–±–µ), –µ—Å–ª–∏ –∫—Ç–æ-—Ç–æ –∏–∑ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –¥–æ–ª–≥–æ –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç —Ç–µ—Å—Ç—ã.

[x] AI-–†–µ–¥–∞–∫—Ç–æ—Ä: –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –±–æ—Ç—É —Ç–µ–∫—Å—Ç, –∞ –æ–Ω —Å–∞–º —Å–æ–∑–¥–∞—Å—Ç –∏–∑ –Ω–µ–≥–æ –∫—Ä–∞—Å–∏–≤–æ –æ—Ñ–æ—Ä–º–ª–µ–Ω–Ω—ã–π .txt —Ñ–∞–π–ª –∏ –ø–æ–ª–æ–∂–∏—Ç –≤ data/knowledge.

–§–∞–π–ª: app/bot/handlers/admin.py (—Ö–µ–Ω–¥–ª–µ—Ä—ã –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏), app/services/ai_service.py (–º–µ—Ç–æ–¥ process_knowledge_text)

‚ö™ –≠—Ç–∞–ø 7. –®–ª–∏—Ñ–æ–≤–∫–∞ –∏ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
[ ] Error Reporting: –ë–æ—Ç –ø—Ä–∏—Å—ã–ª–∞–µ—Ç —Ç–µ–±–µ –≤ –ª–∏—á–∫—É —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –ª–æ–≥, –µ—Å–ª–∏ Gemini –≤—ã–¥–∞–ª–∞ –æ—à–∏–±–∫—É (–∫–∞–∫ —Ç–µ 404, —á—Ç–æ –º—ã –≤–∏–¥–µ–ª–∏).

[ ] WAL Mode –¥–ª—è SQLite: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Ä–∞–±–æ—Ç—ã –ø–æ–¥ –Ω–∞–≥—Ä—É–∑–∫–æ–π.