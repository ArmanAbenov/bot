# –ú–∏–≥—Ä–∞—Ü–∏—è: –ò–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–æ–µ –º–µ–Ω—é —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏ –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏

## –û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏
–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–µ –∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–æ–µ –º–µ–Ω—é –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∞–∑–æ–π –∑–Ω–∞–Ω–∏–π —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –ø–æ –æ—Ç–¥–µ–ª–∞–º, –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ñ–∞–π–ª–æ–≤ –∏ —É–¥–∞–ª–µ–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤.

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –º–µ–Ω—é

### –£—Ä–æ–≤–µ–Ω—å 1: –°–ø–∏—Å–æ–∫ –æ—Ç–¥–µ–ª–æ–≤
```
üì¶ –í—ã–±–µ—Ä–∏—Ç–µ –æ—Ç–¥–µ–ª –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ñ–∞–π–ª–æ–≤:
üìä –í—Å–µ–≥–æ: 12 –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

[üìÇ –û–±—â–∏–µ –∑–Ω–∞–Ω–∏—è (3)]
[üìÇ –î–æ—Å—Ç–∞–≤–∫–∞ (3)]
[üìÇ –°–æ—Ä—Ç–∏—Ä–æ–≤–æ—á–Ω—ã–π —Ü–µ–Ω—Ç—Ä (3)]
[üìÇ –ú–µ–Ω–µ–¥–∂–µ—Ä (2)]
[üìÇ –ö–ª–∏–µ–Ω—Ç—Å–∫–∏–π —Å–µ—Ä–≤–∏—Å (1)]
```

### –£—Ä–æ–≤–µ–Ω—å 2: –°–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤ –≤ –æ—Ç–¥–µ–ª–µ
```
üìÇ –§–∞–π–ª—ã –≤ –æ—Ç–¥–µ–ª–µ "–°–æ—Ä—Ç–∏—Ä–æ–≤–æ—á–Ω—ã–π —Ü–µ–Ω—Ç—Ä":
üìä –í—Å–µ–≥–æ: 3 –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

[üìÑ franchise_dispatch.txt (5.7 KB)]
[üìÑ parcel_return.txt (2.0 KB)]
[üìÑ –ü—Ä–∏–Ω—è—Ç–∏–µ —Ç–æ–≤–∞—Ä–∞ –Ω–∞ –ê—Å—Ç–∞–Ω—É.txt (7.4 KB)]

[‚¨ÖÔ∏è –ö —Å–ø–∏—Å–∫—É –æ—Ç–¥–µ–ª–æ–≤]
```

### –£—Ä–æ–≤–µ–Ω—å 3: –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ñ–∞–π–ª–µ
```
üìÑ –§–∞–π–ª: franchise_dispatch.txt
üìä –†–∞–∑–º–µ—Ä: 5.7 KB
üìÇ –û—Ç–¥–µ–ª: –°–æ—Ä—Ç–∏—Ä–æ–≤–æ—á–Ω—ã–π —Ü–µ–Ω—Ç—Ä

[üóë –£–¥–∞–ª–∏—Ç—å —Ñ–∞–π–ª]
[‚¨ÖÔ∏è –ö —Å–ø–∏—Å–∫—É —Ñ–∞–π–ª–æ–≤]
[‚¨ÖÔ∏è –ö —Å–ø–∏—Å–∫—É –æ—Ç–¥–µ–ª–æ–≤]
```

## –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### 1. –ù–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã –≤ `app/services/ai_service.py`

#### `get_department_files(dept_name: str) -> List[dict]`
–ü–æ–ª—É—á–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤ –≤ —É–∫–∞–∑–∞–Ω–Ω–æ–º –æ—Ç–¥–µ–ª–µ.

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**
```python
[
    {
        "name": "guide.txt",
        "path": "sorting/guide.txt",
        "size": "5.7 KB",
        "size_bytes": 5832
    },
    ...
]
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –†–µ–∫—É—Ä—Å–∏–≤–Ω—ã–π –ø–æ–∏—Å–∫ —Ñ–∞–π–ª–æ–≤ (–≤–∫–ª—é—á–∞—è –ø–æ–¥–ø–∞–ø–∫–∏)
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã: `.txt`, `.pdf`, `.docx`, `.md`, `.rst`
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ (B, KB, MB)
- –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –∏–º–µ–Ω–∏ —Ñ–∞–π–ª–∞

#### `delete_document(dept_name: str, filename: str) -> bool`
–£–¥–∞–ª—è–µ—Ç —Ñ–∞–π–ª –∏–∑ –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç –≤–µ–∫—Ç–æ—Ä–Ω—ã–π –∏–Ω–¥–µ–∫—Å.

**–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**
- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç path traversal –∞—Ç–∞–∫
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è —Ñ–∞–π–ª–∞
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ (—Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω—ã)
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è dept_name (–∑–∞–ø—Ä–µ—Ç `..`, `/`, `\`)

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:**
–ü–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è —Ñ–∞–π–ª–∞ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `rebuild_index_for_department()` –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è RAG –∏–Ω–¥–µ–∫—Å–∞.

### 2. Callback-–ø–∞—Ç—Ç–µ—Ä–Ω—ã

| –ü–∞—Ç—Ç–µ—Ä–Ω | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|---------|----------|--------|
| `kb_view` | –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø–∏—Å–æ–∫ –æ—Ç–¥–µ–ª–æ–≤ | `kb_view` |
| `kb_dept:{dept_name}` | –ü–æ–∫–∞–∑–∞—Ç—å —Ñ–∞–π–ª—ã –≤ –æ—Ç–¥–µ–ª–µ | `kb_dept:sorting` |
| `kb_file:{dept_name}:{filename}` | –ü–æ–∫–∞–∑–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ñ–∞–π–ª–µ | `kb_file:sorting:guide.txt` |
| `kb_del:{dept_name}:{filename}` | –£–¥–∞–ª–∏—Ç—å —Ñ–∞–π–ª | `kb_del:sorting:guide.txt` |

### 3. –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ö–µ–Ω–¥–ª–µ—Ä—ã –≤ `app/bot/handlers/admin.py`

#### `handle_manage_knowledge()`
–ò–∑–º–µ–Ω–µ–Ω –Ω–∞ inline-–∫–ª–∞–≤–∏–∞—Ç—É—Ä—É –≤–º–µ—Å—Ç–æ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –≤—ã–≤–æ–¥–∞.

#### –ù–æ–≤—ã–µ callback handlers:
- `handle_kb_view_callback()` - –≤–æ–∑–≤—Ä–∞—Ç –∫ —Å–ø–∏—Å–∫—É –æ—Ç–¥–µ–ª–æ–≤
- `handle_kb_department_callback()` - –ø–æ–∫–∞–∑ —Ñ–∞–π–ª–æ–≤ –≤ –æ—Ç–¥–µ–ª–µ
- `handle_kb_file_callback()` - –ø–æ–∫–∞–∑ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ñ–∞–π–ª–µ
- `handle_kb_delete_callback()` - —É–¥–∞–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–∞

### 4. –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è

–î–æ–±–∞–≤–ª–µ–Ω—ã –∫–ª—é—á–∏ –≤–æ –≤—Å–µ —è–∑—ã–∫–æ–≤—ã–µ —Ñ–∞–π–ª—ã (`app/core/locales/*.json`):

| –ö–ª—é—á | RU | EN |
|------|----|----|
| `confirm_delete` | "–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —Ñ–∞–π–ª?" | "Are you sure you want to delete the file?" |
| `file_deleted` | "‚úÖ –§–∞–π–ª —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω. –ò–Ω–¥–µ–∫—Å –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è..." | "‚úÖ File successfully deleted. Updating index..." |
| `back_to_depts` | "‚¨ÖÔ∏è –ö —Å–ø–∏—Å–∫—É –æ—Ç–¥–µ–ª–æ–≤" | "‚¨ÖÔ∏è Back to departments" |
| `back_to_files` | "‚¨ÖÔ∏è –ö —Å–ø–∏—Å–∫—É —Ñ–∞–π–ª–æ–≤" | "‚¨ÖÔ∏è Back to files" |
| `kb_select_department` | "–í—ã–±–µ—Ä–∏—Ç–µ –æ—Ç–¥–µ–ª –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ñ–∞–π–ª–æ–≤:" | "Select a department to view files:" |
| `kb_files_in_dept` | "üìÇ –§–∞–π–ª—ã –≤ –æ—Ç–¥–µ–ª–µ \"{dept}\":" | "üìÇ Files in department \"{dept}\":" |
| `kb_no_files_in_dept` | "–í —ç—Ç–æ–º –æ—Ç–¥–µ–ª–µ –ø–æ–∫–∞ –Ω–µ—Ç —Ñ–∞–π–ª–æ–≤." | "No files in this department yet." |
| `kb_file_info` | "üìÑ –§–∞–π–ª: {filename}..." | "üìÑ File: {filename}..." |
| `kb_delete_button` | "üóë –£–¥–∞–ª–∏—Ç—å —Ñ–∞–π–ª" | "üóë Delete file" |
| `kb_deleting` | "‚è≥ –£–¥–∞–ª—è–µ–º —Ñ–∞–π–ª –∏ –æ–±–Ω–æ–≤–ª—è–µ–º –∏–Ω–¥–µ–∫—Å..." | "‚è≥ Deleting file and updating index..." |

## –ü—Ä–æ—Ü–µ—Å—Å —É–¥–∞–ª–µ–Ω–∏—è —Ñ–∞–π–ª–∞

```mermaid
graph TD
    A[–ê–¥–º–∏–Ω –Ω–∞–∂–∏–º–∞–µ—Ç "üóë –£–¥–∞–ª–∏—Ç—å"] --> B[kb_del callback]
    B --> C[–ü—Ä–æ–≤–µ—Ä–∫–∞ admin –¥–æ—Å—Ç—É–ø–∞]
    C --> D[–ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞—Ç—É—Å "–£–¥–∞–ª–µ–Ω–∏–µ..."]
    D --> E[delete_document]
    E --> F[–§–∏–∑–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–∞]
    F --> G[rebuild_index_for_department]
    G --> H[–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ RAG –∏–Ω–¥–µ–∫—Å–∞]
    H --> I[–ü–æ–∫–∞–∑–∞—Ç—å —É—Å–ø–µ—Ö + –∫–Ω–æ–ø–∫–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏]
```

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
```python
if not await check_admin_access(callback.from_user.id):
    await callback.answer("–£ –≤–∞—Å –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞.", show_alert=True)
    return
```

–í—Å–µ callback handlers –ø—Ä–æ–≤–µ—Ä—è—é—Ç, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —è–≤–ª—è–µ—Ç—Å—è –∞–¥–º–∏–Ω–æ–º —á–µ—Ä–µ–∑ —Ç–∞–±–ª–∏—Ü—É –ë–î.

### 2. –ó–∞—â–∏—Ç–∞ –æ—Ç path traversal
```python
# –í delete_document()
if ".." in dept_name or "/" in dept_name or "\\" in dept_name:
    raise ValueError(f"Invalid department name: {dept_name}")

# –ü—Ä–æ–≤–µ—Ä–∫–∞ resolve()
if not str(file_path.resolve()).startswith(str(knowledge_path.resolve())):
    raise ValueError(f"Invalid file path: {filename}")
```

### 3. –í–∞–ª–∏–¥–∞—Ü–∏—è callback –¥–∞–Ω–Ω—ã—Ö
```python
parts = callback.data.split(":", 2)
if len(parts) != 3:
    await callback.answer("–û—à–∏–±–∫–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ –¥–∞–Ω–Ω—ã—Ö.", show_alert=True)
    return
```

## –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### 1. –ê–¥–º–∏–Ω –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç "üìö –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–∑–æ–π –∑–Ω–∞–Ω–∏–π"
–í–∏–¥–∏—Ç —Å–ø–∏—Å–æ–∫ –æ—Ç–¥–µ–ª–æ–≤ —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —Ñ–∞–π–ª–æ–≤ –≤ –∫–∞–∂–¥–æ–º.

### 2. –í—ã–±–∏—Ä–∞–µ—Ç –æ—Ç–¥–µ–ª "üìÇ –°–æ—Ä—Ç–∏—Ä–æ–≤–æ—á–Ω—ã–π —Ü–µ–Ω—Ç—Ä (3)"
–í–∏–¥–∏—Ç —Å–ø–∏—Å–æ–∫ –∏–∑ 3 —Ñ–∞–π–ª–æ–≤ —Å –∏—Ö —Ä–∞–∑–º–µ—Ä–∞–º–∏.

### 3. –ö–ª–∏–∫–∞–µ—Ç –Ω–∞ —Ñ–∞–π–ª "franchise_dispatch.txt (5.7 KB)"
–í–∏–¥–∏—Ç –¥–µ—Ç–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ñ–∞–π–ª–µ –∏ –∫–Ω–æ–ø–∫—É "üóë –£–¥–∞–ª–∏—Ç—å —Ñ–∞–π–ª".

### 4. –ù–∞–∂–∏–º–∞–µ—Ç "üóë –£–¥–∞–ª–∏—Ç—å —Ñ–∞–π–ª"
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Å—Ç–∞—Ç—É—Å "‚è≥ –£–¥–∞–ª—è–µ–º —Ñ–∞–π–ª –∏ –æ–±–Ω–æ–≤–ª—è–µ–º –∏–Ω–¥–µ–∫—Å..."
- –§–∞–π–ª —Ñ–∏–∑–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è–µ—Ç—Å—è –∏–∑ `data/knowledge/sorting/`
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –≤–µ–∫—Ç–æ—Ä–Ω—ã–π –∏–Ω–¥–µ–∫—Å –æ—Ç–¥–µ–ª–∞ `sorting`
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ "‚úÖ –§–∞–π–ª —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω"
- –î–æ—Å—Ç—É–ø–Ω—ã –∫–Ω–æ–ø–∫–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –Ω–∞–∑–∞–¥

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–æ–≤
```python
if size_bytes < 1024:
    size_str = f"{size_bytes} B"
elif size_bytes < 1024 * 1024:
    size_str = f"{size_bytes / 1024:.1f} KB"
else:
    size_str = f"{size_bytes / (1024 * 1024):.1f} MB"
```

### –†–µ–∫—É—Ä—Å–∏–≤–Ω—ã–π –ø–æ–∏—Å–∫ —Ñ–∞–π–ª–æ–≤
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `dept_path.rglob("*")` –¥–ª—è –ø–æ–∏—Å–∫–∞ —Ñ–∞–π–ª–æ–≤ –≤–æ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –ø–∞–ø–∫–∞—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, `delivery/courier/`).

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–æ–≤
–ü–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è —Ñ–∞–π–ª–∞ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `rebuild_index_for_department()`, –∫–æ—Ç–æ—Ä—ã–π:
1. –ó–∞–Ω–æ–≤–æ —Å–∫–∞–Ω–∏—Ä—É–µ—Ç –ø–∞–ø–∫—É –æ—Ç–¥–µ–ª–∞
2. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç embeddings –¥–ª—è –æ—Å—Ç–∞–≤—à–∏—Ö—Å—è —Ñ–∞–π–ª–æ–≤
3. –û–±–Ω–æ–≤–ª—è–µ—Ç FAISS –∏–Ω–¥–µ–∫—Å

## –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### FileNotFoundError
```python
except FileNotFoundError as e:
    await callback.answer(f"–§–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω: {filename}", show_alert=True)
```

### ValueError (path traversal)
```python
except ValueError as e:
    # –õ–æ–≥–∏—Ä—É–µ—Ç—Å—è –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –æ—à–∏–±–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
```

### –û—à–∏–±–∫–∏ –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∏ –∏–Ω–¥–µ–∫—Å–∞
```python
except Exception as rebuild_error:
    logger.error(f"Error rebuilding index: {rebuild_error}")
    # –ù–µ –ø—Ä–µ—Ä—ã–≤–∞–µ–º –ø—Ä–æ—Ü–µ—Å—Å, —Ñ–∞–π–ª —É–∂–µ —É–¥–∞–ª–µ–Ω
```

## –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç —Å–æ –≤—Å–µ–º–∏ 4 —è–∑—ã–∫–∞–º–∏ (ru, en, kk, zh)
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤–ª–æ–∂–µ–Ω–Ω—ã–µ –ø–∞–ø–∫–∏ (delivery/courier, delivery/franchise)
- ‚úÖ –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –º–µ—Ç–æ–¥–∞–º–∏
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ RAG –∏–Ω–¥–µ–∫—Å–æ–≤

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ:
- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Ñ–∞–π–ª–æ–≤ –¥–ª—è –≤—Å–µ—Ö –æ—Ç–¥–µ–ª–æ–≤
- ‚úÖ –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–æ–≤ —Ñ–∞–π–ª–æ–≤ (B, KB, MB)
- ‚úÖ –ü–∞—Ä—Å–∏–Ω–≥ callback –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—É—Ç–µ–π (–∑–∞—â–∏—Ç–∞ –æ—Ç path traversal)
- ‚úÖ –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö –∫–ª—é—á–µ–π –Ω–∞ 4 —è–∑—ã–∫–∞—Ö
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ñ–∞–π–ª–æ–≤/–æ—Ç–¥–µ–ª–æ–≤

## –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

- `app/services/ai_service.py` - –º–µ—Ç–æ–¥—ã `get_department_files()`, `delete_document()`
- `app/bot/handlers/admin.py` - —Ö–µ–Ω–¥–ª–µ—Ä—ã –∏ callback handlers
- `app/core/locales/*.json` - –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è (ru, en, kk, zh)

## –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

- [ ] –ú–∞—Å—Å–æ–≤–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤
- [ ] –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ —Ñ–∞–π–ª–æ–≤
- [ ] –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é —Ñ–∞–π–ª–æ–≤ –≤ –æ—Ç–≤–µ—Ç–∞—Ö
- [ ] –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π (–ª–æ–≥–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è/—É–¥–∞–ª–µ–Ω–∏—è)
